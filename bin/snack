#!/usr/bin/env ruby
require File.expand_path('../../lib/snack', __FILE__)

command = ARGV[0] || 'serve'
directory = ARGV[1] || '_source'

if %w[ build serve new ].include?(command)
  abort "-: Snack :- Unable to locate: '#{directory}'" unless command == 'new' || File.exists?(directory)
  puts "-: Snack :- App root is: '#{directory}'"
  @app = Snack::Application.new(:root => directory)
  @app.send(command)
else
  puts "'#{command}' is not a valid snack command"
  puts "Usage: snack {build,serve,new} <directory>"
end